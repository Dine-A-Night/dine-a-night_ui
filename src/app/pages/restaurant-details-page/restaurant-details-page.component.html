<div class="min-h-screen">
    <ng-container *ngIf="restaurant; else loadingContainer">
        <h2 class="text-3xl font-bold container-90-vw py-4">{{
            restaurant.name
        }}</h2>
        <!-- Cover Image -->
        <section
            class="h-96 bg-cover bg-center backdrop-opacity-10"
            style="background-image: url('{{ coverImage }}');">
        </section>

        <!-- Restaurant Details -->
        <section>
            <mat-tab-group color="accent">
                <mat-tab>
                    <ng-template mat-tab-label>
                        <span class="flex justify-between items-center gap-5">
                            <mat-icon class="hidden md:block">info</mat-icon>
                            Details
                        </span>
                    </ng-template>

                    <!-- Details Body -->
                    <div class="min-h-screen">
                        <!-- Controls -->
                        <section
                            class="container-90-vw py-6 flex flex-wrap justify-center sm:justify-end items-center gap-6 sm:gap-10">
                            <file-selector
                                (filesSelected)="uploadCoverPhoto($event)"
                                *ngIf="showEdit">
                                <button
                                    #fileSelector
                                    mat-flat-button
                                    color="accent">
                                    <mat-icon>upload</mat-icon>
                                    Upload Cover Photo
                                </button>
                            </file-selector>
                            <button
                                *ngIf="showEdit"
                                mat-flat-button
                                (click)="onEditClick()"
                                color="accent">
                                <mat-icon>edit</mat-icon>
                                Edit
                            </button>
                        </section>

                        <section class="container-90-vw text-lg">
                            <section
                                class="flex flex-wrap justify-center sm:justify-start gap-7 my-2">
                                <!-- Cuisine -->
                                <div
                                    class="flex flex-wrap items-center justify-center text-center">
                                    <mat-icon class="mr-1"
                                        >restaurant_menu</mat-icon
                                    >
                                    <span
                                        *ngFor="
                                            let cuisineName of cuisines;
                                            let last = last
                                        "
                                        >{{ cuisineName
                                        }}{{ !last ? ',' : '' }}</span
                                    >
                                </div>
                                <!-- Location -->
                                <div
                                    class="flex flex-wrap items-center justify-center text-center">
                                    <mat-icon class="mr-1">place</mat-icon>
                                    <p>{{ location }}</p>
                                </div>
                                <!-- Reviews -->
                                <div
                                    class="flex flex-wrap items-center justify-center text-center">
                                    <mat-icon class="mr-1"
                                        >rate_review</mat-icon
                                    >
                                    <span
                                        >{{
                                            restaurant.reviews?.length ?? 0
                                        }}
                                        Reviews</span
                                    >
                                </div>
                            </section>

                            <mat-divider />

                            <section class="py-4">
                                <p>{{ restaurant.description }}</p>
                            </section>
                        </section>
                    </div>
                </mat-tab>

                <!-- Images Tab -->
                <mat-tab>
                    <ng-template mat-tab-label>
                        <span class="flex justify-between items-center gap-5">
                            <mat-icon class="hidden md:block">image</mat-icon>
                            Images
                        </span>
                    </ng-template>

                    <!-- Images Body -->
                    <div class="min-h-screen">
                        <restaurant-images
                            (imageUploaded)="restaurantUpdated($event)"
                            [restaurant]="restaurant"></restaurant-images>
                    </div>
                </mat-tab>

                <!-- Reviews Tab -->
                <mat-tab>
                    <ng-template mat-tab-label>
                        <span class="flex justify-between items-center gap-5">
                            <mat-icon class="hidden md:block"
                                >rate_review</mat-icon
                            >
                            Reviews
                        </span>
                    </ng-template>

                    <!-- Reviews Body -->
                    <div class="min-h-screen">Reviews</div>
                </mat-tab>
            </mat-tab-group>
        </section>
    </ng-container>

    <ng-template #loadingContainer>
        <loading-spinner [label]="'loading-restaurant'"></loading-spinner>
    </ng-template>
</div>
